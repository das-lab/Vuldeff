diff --git a/libraries/error_report.lib.php b/libraries/error_report.lib.php
index 1d7741e816c..856425606f9 100644
--- a/libraries/error_report.lib.php
+++ b/libraries/error_report.lib.php
@@ -238,7 +238,7 @@ function PMA_countLines($filename)
     foreach (explode('/', $filename) as $part) {
         if ($part == '..') {
             $depath--;
-        } elseif ($part != '.') {
+        } elseif ($part != '.' || $part === '') {
             $depath++;
         }
         if ($depath < 0) {
