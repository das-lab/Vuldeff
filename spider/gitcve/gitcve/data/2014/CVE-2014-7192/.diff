diff --git a/index.js b/index.js
index 43dbdf4..9acae6b 100644
--- a/index.js
+++ b/index.js
@@ -4,10 +4,11 @@ module.exports = function (src, file) {
     if (typeof src !== 'string') src = String(src);
     
     try {
-        Function(src);
+        eval('throw "STOP"; (function () { ' + src + '})()');
         return;
     }
     catch (err) {
+        if (err === 'STOP') return undefined;
         if (err.constructor.name !== 'SyntaxError') throw err;
         return errorInfo(src, file);
     }
diff --git a/test/sources/run2.js b/test/sources/run2.js
index f301d32..88c7b94 100644
--- a/test/sources/run2.js
+++ b/test/sources/run2.js
@@ -1 +1,3 @@
-}); process.exit(1); (function () {
+})();
+process.exit(1);
+(function () {
